webpackJsonp([68],{1338:function(e,t,a){function i(e){a(1339)}var r=a(35)(a(1341),a(1342),i,"data-v-7cbaca4a",null);e.exports=r.exports},1339:function(e,t,a){var i=a(1340);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(531)("76779cdd",i,!0,{})},1340:function(e,t,a){var i=a(532);t=e.exports=a(530)(!1),t.push([e.i,".app-search-head-input[data-v-7cbaca4a]{width:100%}.app-search[data-v-7cbaca4a]{display:-webkit-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:.8rem;width:100%}.app-search .header-btn[data-v-7cbaca4a]{display:block;margin:0 .2rem;color:#666}.app-search .app-header-icon[data-v-7cbaca4a]{display:block;width:.6rem;height:.6rem}.app-search .app-header-icon.icon-back[data-v-7cbaca4a]{width:.5rem;height:.5rem;background-image:url("+i(a(534))+")}.app-search .app-header-icon.icon-search[data-v-7cbaca4a]{background-image:url("+i(a(533))+")}.search-item[data-v-7cbaca4a]{background:#fff;width:100%}.search-item input[data-v-7cbaca4a]{border:1px solid #e5e5e5;border-radius:.04rem;width:100%;padding:0 .2rem;outline:0;font-size:.3rem;font-weight:400;height:.5rem;line-height:normal}.search-key-list[data-v-7cbaca4a]{text-align:left;position:fixed;top:.8rem;z-index:10;width:100%;height:100%;background:rgba(0,0,0,.5)}.search-key-list li[data-v-7cbaca4a]{background:#fff;list-style:none}.search-key-list .item[data-v-7cbaca4a]{border-bottom:1px solid rgba(0,0,0,.15);margin:0 .32rem;display:-webkit-box;display:-ms-flexbox;display:-webkit-flex;display:flex;height:.95rem}.search-key-list .txt[data-v-7cbaca4a]{display:inline-block;overflow:hidden;height:.95rem;font-size:.28rem;line-height:.95rem;white-space:nowrap;color:#333}.search-key-list span[data-v-7cbaca4a]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:right;display:inline-block;height:.95rem;overflow:hidden}.search-key-list span a[data-v-7cbaca4a]{display:inline-block;background:#f5f5f5;height:.55rem;line-height:.55rem;padding:0 .15rem;margin-left:.15rem;color:rgba(0,0,0,.54);vertical-align:middle;margin-top:.2rem;text-align:center;font-style:normal}",""])},1341:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(69),r=a.n(i),s=a(70),o=a(567);a(72);t.default={name:"input-seatch",props:["keyname"],data:function(){return{searchListModal:!1,loading:!1,routerName:"",key:""}},computed:r()({},Object(s.d)("search",["searchList"])),methods:{goback:function(){o.a.removeItem("search-state"),this.$router.go(-1)},inputFocus:function(){this.showPk=!1},inputBlur:function(){this.showPk=!0},inputKeyUp:function(){if(!this.loading){var e=this;this.loading=!0,setTimeout(function(){var t=e.key.trim();if(!t)return e.searchListModal=!1,void(e.loading=!1);e.$store.dispatch("search/getSearchList",{query:t}).then(function(){e.searchListModal=e.searchList&&e.searchList.length>0,e.loading=!1,setTimeout(function(){window.statInit()},500)})},300)}},submitKey:function(e,t){var a=this;a.key.trim();if(document.activeElement.blur(),this.searchListModal=!1,this.key="",e&&e.action&&e.action.extra&&e.action.extra.commodityId)a.$router.push({name:"product",params:{id:e.action.extra.commodityId}});else{var i=e&&e.title?e.title:e;if(i==this.routerName&&!t)return void window.location.reload();o.a.removeItem("search-state"),o.a.removeItem("search-pk");var r={key:i};t&&(r.class_parameters=t),a.$router.push({name:"search-list",query:r})}}},mounted:function(){this.routerName=this.keyname||"",this.key=this.routerName}}},1342:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-search-head-input"},[a("div",{staticClass:"app-search"},[a("a",{staticClass:"header-btn",on:{click:function(t){e.goback()}}},[a("i",{staticClass:"image-icons app-header-icon icon-back"})]),a("div",{staticClass:"search-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.key,expression:"key"}],ref:"keyVal",attrs:{type:"search",autocomplete:"off",placeholder:"搜索商品名称",autocapitalize:"off"},domProps:{value:e.key},on:{input:[function(t){t.target.composing||(e.key=t.target.value)},function(t){e.inputKeyUp()}],blur:function(t){e.inputBlur()},focus:function(t){e.inputFocus()},compositionend:function(t){e.inputKeyUp()},keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.submitKey(e.key)}}})]),a("a",{staticClass:"header-btn",on:{click:function(t){e.submitKey(e.key)}}},[a("i",{staticClass:"image-icons app-header-icon icon-search"})])]),e.searchListModal?a("div",{staticClass:"search-key-list",on:{click:function(t){t.stopPropagation(),e.searchListModal=!1}}},e._l(e.searchList,function(t,i){return a("li",[a("div",{staticClass:"item",on:{click:function(a){a.stopPropagation(),e.submitKey(t)}}},[a("a",{staticClass:"txt",attrs:{href:"javascript:void(0);","data-log_code":"m#bid=3359092."+i+"&page=promotio"}},[e._v(e._s(t.title))]),t.class_params&&t.class_params.length>0?a("span",e._l(t.class_params,function(i){return a("a",{attrs:{"data-log_code":"m#bid=3359092."+i.parameter_id+"&page=promotio"},on:{click:function(a){e.submitKey(t,i.name)}}},[e._v(e._s(i.name))])})):e._e()])])})):e._e()])},staticRenderFns:[]}},545:function(e,t,a){function i(e){a(793)}var r=a(35)(a(795),a(796),i,"data-v-2d23ac17",null);e.exports=r.exports},567:function(e,t,a){"use strict";function i(e){for(var t=d.length-1;t>=0;t--){var a=d.key(t);0===a.indexOf(h)&&d.removeItem(a)}}function r(e){"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));try{return d.getItem(h+e)}catch(e){}}function s(e,t,a){"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e)),void 0===t&&(t=null);try{return d.setItem(h+e,t)}catch(e){}}function o(e){"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));try{return d.removeItem(h+e)}catch(e){}}function n(e){"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e)),this.key=e,this.init()}var c=a(129),l=a.n(c),d=null,h="mishop-";try{window.localStorage&&window.localStorage,d=window.localStorage}catch(e){}n.prototype={constructor:n,init:function(){this.checkExp()},getData:function(){var e=r(this.key)||"{}";try{e=JSON.parse(e)}catch(t){e={}}return e},checkExp:function(){var e,t,a=this.getData(),i={},r=+new Date;for(e in a)t=a[e],+t.exp>r&&(i[e]=t);s(this.key,l()(i))},set:function(e,t,a){var i=this.getData();i[e]={val:t,exp:a||+new Date},s(this.key,l()(i))},get:function(e){var t=this.getData();return t=t[e],t?t.val||null:null},remove:function(e){var e=this.getData();e[key]&&delete e[key],s(this.key,l()(e))}},t.a={clear:i,getItem:r,setItem:s,removeItem:o,structured:n}},793:function(e,t,a){var i=a(794);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(531)("7f4378fc",i,!0,{})},794:function(e,t,a){t=e.exports=a(530)(!1),t.push([e.i,".app-search-page[data-v-2d23ac17]{padding-top:.8rem}.app-search-page li[data-v-2d23ac17]{list-style-type:none}.page-wrap[data-v-2d23ac17]{height:100%;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}.app-search-head[data-v-2d23ac17]{display:-webkit-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:fixed;z-index:99;top:0;left:0;right:0;background:#f2f2f2}.search-item[data-v-2d23ac17]{border:1px solid #e5e5e5;padding:0 .2rem;background:#fff;width:100%;border-radius:.04rem}.search-item input[data-v-2d23ac17]{width:100%;border:0 none;outline:0;font-size:.3rem;font-weight:400;height:.5rem;padding:.1rem 0;line-height:normal}.search-promotion-title[data-v-2d23ac17]{line-height:.8rem;padding:0 .3rem;font-size:.24rem;text-align:left}.search-promotion-list a[data-v-2d23ac17]{display:block}.search-promotion-list img[data-v-2d23ac17]{width:100%;display:block}.search-key[data-v-2d23ac17]{margin:.1rem .2rem;text-align:left}.search-key a[data-v-2d23ac17]{display:inline-block;background:#e4e4e4;padding:.14rem .2rem;margin:.1rem;border:1px solid #e4e4e4;background:hsla(12,99%,71%,.05);font-size:.24rem;color:#484848}.search-key-list[data-v-2d23ac17]{text-align:left}.search-key-list a[data-v-2d23ac17]{border-bottom:1px solid #f6f6f6;display:block;overflow:hidden;padding:.2rem .3rem;background:#f5f5f5;font-size:.28rem;line-height:.36rem;white-space:nowrap;color:#333}.search-hotClassify .hotClassify-list[data-v-2d23ac17]{text-align:left;max-height:1.2rem;overflow:hidden;padding-left:.32rem}.search-hotClassify a[data-v-2d23ac17]{display:inline-block;background:#f5f5f5;height:.55rem;line-height:.55rem;padding:0 .15rem;margin-right:.15rem;margin-bottom:.1rem;color:rgba(0,0,0,.54)}",""])},795:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(11),r=a.n(i),s=a(12),o=a.n(s),n=a(69),c=a.n(n),l=a(70),d=a(9),h=a(1338),p=a.n(h);t.default={name:"search",components:{inputSearch:p.a},methods:c()({},Object(l.b)("appShell/appHeader",["setAppHeader"]),Object(l.b)("appShell/appBottomNavigator",["hideBottomNav"]),{submitKey:function(e,t){this.$refs.inputsearch.submitKey(e,t)}}),computed:c()({},Object(l.d)("search",["searchKey","searchAd","searchList","hotClassify"])),asyncData:function(e){var t=this,a=e.store;e.route;return o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.dispatch("search/getSearch");case 2:case"end":return e.stop()}},e,t)}))()},activated:function(){this.setAppHeader({show:!1}),this.hideBottomNav(),this.$store.commit("search/"+d._26,[])}}},796:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-search-page"},[a("div",{staticClass:"app-search-head"},[a("inputSearch",{ref:"inputsearch"})],1),a("div",{staticClass:"page-wrap"},[e.searchAd&&e.searchAd.length>0?a("div",{staticClass:"search-promotion"},[a("div",{staticClass:"search-promotion-title"},[e._v("热门搜索")]),a("div",{staticClass:"search-promotion-list"},e._l(e.searchAd,function(t){return a("div",{staticClass:"item-list",style:"height:"+t.body.h/100+"rem;width:"+t.body.w/100+"rem;"},e._l(t.body.items,function(t){return a("div",{staticClass:"item",style:"height:"+t.h/100+"rem;width:"+t.w/100+"rem;"},[a("div",{staticClass:"J_linksign-customize",attrs:{"data-log_code":t.action.log_code},on:{click:function(a){e.go(t.action)}}},[a("img",{attrs:{src:t.img_url}})])])}))}))]):e._e(),e.searchKey&&e.searchKey.length>0?a("div",{staticClass:"search-key"},e._l(e.searchKey,function(t,i){return a("a",{style:"color:"+t.font_n+";border-color:"+t.border_n+";background: "+t.back_n+";",attrs:{href:"javascript:void(0);","data-log_code":"wapsearch#page=promotion&bid=3150779."+i+"&adm="+t.word},domProps:{textContent:e._s(t.word)},on:{click:function(a){e.submitKey(t.word)}}})})):e._e(),e.hotClassify&&e.hotClassify.length>0?a("div",{staticClass:"search-hotClassify"},[a("div",{staticClass:"search-promotion-title"},[e._v("常用分类")]),a("div",{staticClass:"hotClassify-list"},e._l(e.hotClassify,function(t){return a("a",{attrs:{"data-log_code":"m#bid=3342133."+t.parameter_id+"&page=promotio",href:"javascript:void(0);"},on:{click:function(a){e.submitKey(t.name)}}},[e._v(e._s(t.name))])}))]):e._e()])])},staticRenderFns:[]}}});